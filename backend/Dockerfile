FROM node:20.16.0-alpine

WORKDIR /usr/src/app

COPY *.json ./

RUN npm ci --production 

COPY . .

EXPOSE 5000

USER node

ENV MONOGODB_URI=MONOGODB_URI
ENV MONOGODB_USERNAME=MONOGODB_USERNAME
ENV MONOGODB_PASSWORD=MONOGODB_PASSWORD

ENTRYPOINT [ "node", "index.js" ]